{% extends "base.html" %}

{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
    <table class="table">
      <tr>
        <td><img src="{{ user.avatar(128) }}"></td>
        <td>
             <h1>User: {{ user.username }}</h1>
             <p>Status:
              {% if user.administrator %}
              <b>Administrator</b>
              {% else %}
              Member
              {% endif %}
             </p>
             {% if user.last_seen %}<p>Last seen on: {{ user.last_seen }}</p>{% endif %}
        </td>
      </tr>
    </table>
    <hr>

    <table class="table">
      <tr>
        <td style="vertical-align:bottom">
         <div class="row">
          <div class="col-md-4">
            <form action="" method="post">
             {{ form.hidden_tag() }}
             <p>
              {{ form.username.label }}<br>
              {{ form.username(size=20) }}<br>
              {% for error in form.username.errors %}
              <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
             </p>
             <p>
              {{ form.first_name.label }}<br>
              {{ form.first_name(size=20) }}<br>
              {% for error in form.first_name.errors %}
              <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
             </p>
             <p>
              {{ form.last_name.label }}<br>
              {{ form.last_name(size=20) }}<br>
              {% for error in form.last_name.errors %}
              <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
             </p>
             <p>
              {{ form.email.label }}<br>
              {{ form.email(size=32) }}<br>
              {% for error in form.email.errors %}
              <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
             </p>
             <p>{{ form.submit() }}</p>
           </form>
          </div>
         </div>
        </td>
        <td style="vertical-align:bottom">
         <div class="row">
          <div class="col-md-4">
            <form action="{{url_for('auth.update_password')}}" method="post">
             {{ pform.hidden_tag() }}
             <p>
              {{ pform.password.label }}<br>
              {{ pform.password(size=32) }}<br>
              {% for error in pform.password.errors %}
              <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
             </p>
             <p>
              {{ pform.password2.label }}<br>
              {{ pform.password2(size=32) }}<br>
              {% for error in pform.password2.errors %}
              <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
             </p>
             <p>{{ pform.submit() }}</p>
           </form>
          </div>
         </div>
        </td>
      </tr>
    </table>

    <hr>
    <h3>Projects</h3>
    <table class="table">
      <thead>
        <td>ID</td>
        <td>Name</td>
        <td>Type</td>
        <td>Public</td>
        <td>Status</td>
        <td>Created</td>
      </thead>
      {% for project in projects %}
      <tr>
        <td><a href="{{url_for('projects.show_project', projectid=project.id)}}">{{project.id}}</a></td>
        <td><a href="{{url_for('projects.show_project', projectid=project.id)}}">{{project.name}}</a></td>
        {% if project.project_type == 0 %}
        <td>Image</td>
        {% else %}
        <td>Animation</td>
        {% endif %}
        <td>{{project.is_public}}</td>
        <td>
          {% if project.status == 0 %}
          Open
          {% elif project.status == 1 %}
          Running
          {% elif project.status == 2 %}
          Complete
          {% else %}
          Unknown
          {% endif %}
        </td>
        <td>{{project.timestamp.strftime('%Y-%m-%d %H:%M')}}</td>
      </tr>
      {% endfor %}
      </table>
{% endblock %}
